!function(e){e.fn.weekly_schedule=function(t){function r(t){for(var r=e(t).attr("class").split(" ")[1],n=e(".day"),o=0;o<n.length;o++)if(!e(n[o]).hasClass(r))for(var d=e(n[o]).children(),l=0;l<d.length;l++)e(d[l]).addClass("disabled");e(t).on("mouseleave",function(){a(),s=!1,i=!1})}function a(){for(var t=e(".day"),r=0;r<t.length;r++)for(var a=e(t[r]).children(),n=0;n<a.length;n++)e(a[n]).removeClass("disabled")}var n=e.extend({days:["sun","mon","tue","wed","thu","fri","sat"],hours:"7:00AM-10:00PM",fontFamily:"Montserrat",fontColor:"black",fontWeight:"100",fontSize:"0.8em",hoverColor:"#727bad",selectionColor:"#9aa7ee",headerBackgroundColor:"transparent",onSelected:function(){},onRemoved:function(){}},t||{}),o=function(e){var t=[],r=[],a=e.toUpperCase().split("-"),n=parseInt(a[0].split(":")[0]),o=parseInt(a[1].split(":")[0]),s=a[0].includes("PM")?n+12:n,i=a[1].includes("PM")?o+12:o,d=s;for(d;d<=i;d++){var l={start:d,end:d+1},h="";h+=d>12?(d-12).toString()+":00PM":12==d?d.toString()+":00PM":d.toString()+":00AM",t.push(h),r.push(l)}return{str:t,det:r}}(n.hours);n.hoursParsed=o.str,n.hoursDetail=o.det;var s=!1,i=!1,d=this;if("string"==typeof t)switch(t){case"getSelectedHour":return function(){for(var t=e(".day"),r={},a=0;a<t.length;a++){for(var n=e(t[a]).children(),o=[],s=0;s<n.length;s++)e(n[s]).hasClass("selected")&&o.push(n[s]);r[a]=o}return r}();case"dump":return function(){for(var t=e(".day"),r="",a=0;a<t.length;a++)for(var n=e(t[a]).data("day"),o=e(t[a]).children(),s=!1,i=[],d=0;d<o.length;d++){var l=e(o[d]),h=e(l).hasClass("selected"),c=e(l).next();e(c).hasClass("selected");0==c.length&&h?(s=!1,i.push(e(l)),r+=n+" "+e(i[0]).data("start")+" start, "+n+" "+e(i[i.length-1]).data("end")+" end, ",i=[]):!s&&h?(s=!0,i.push(e(l))):s&&h?i.push(e(l)):s&&!h&&(s=!1,r+=n+" "+e(i[0]).data("start")+" start, "+n+" "+e(i[i.length-1]).data("end")+" end, ",i=[])}return r}();default:throw"Weekly schedule method unrecognized!"}else{var l=n.days,h=n.hoursParsed,c=n.hoursDetail;e(d).addClass("schedule");var u=e("<div></div>",{class:"header"}),p=e("<div></div>",{class:"align-block"});u.append(p);for(C=0;C<l.length;++C){var g=e("<div></div>",{class:"header-item "+l[C]+"-header"}),f=e("<h3>"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(l[C])+"</h3>");g.append(f),u.append(g)}var v=e("<div></div>",{class:"days-wrapper"}),m=e("<div></div>",{class:"hour-header"});v.append(m);for(C=0;C<h.length;C++){var y=e("<div></div>",{class:"hour-header-item "+h[C]}),f=e("<h5>"+h[C]+"</h5>");y.append(f),m.append(y)}for(var C=0;C<l.length;C++){var x=e("<div></div>",{class:"day "+l[C]});e(x).data("day",l[C]);for(var b=0;b<h.length;b++){var k=e("<div></div>",{class:"hour "+h[b]});e(k).data("start",c[b].start),e(k).data("end",c[b].end),x.append(k)}v.append(x)}e(d).append(u),e(d).append(v),e(".schedule").css({width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),e(".header").css({height:"30px",width:"100%",background:n.headerBackgroundColor,marginBottom:"5px",display:"flex",flexDirection:"row"}),e(".align-block").css({width:"100%",height:"100%",background:n.headerBackgroundColor,margin:"3px"}),e(".header-item").css({width:"100%",height:"100%",margin:"2px"}),e(".header-item h3").css({margin:0,textAlign:"center",verticalAlign:"middle",position:"relative",top:"50%",color:n.fontColor,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,transform:"translateY(-50%)",userSelect:"none"}),e(".hour-header").css({display:"flex",flexDirection:"column",margin:"2px",marginRight:"1px",background:n.headerBackgroundColor,width:"100%"}),e(".days-wrapper").css({width:"100%",height:"100%",background:"transparent",display:"flex",flexDirection:"row",justifyContent:"flex-start",position:"relative"}),e(".hour-header-item").css({width:"100%",height:"100%",border:"none",borderColor:"none",borderStyle:"none"}),e(".hour-header-item h5").css({color:n.fontColor,margin:"0",textAlign:"right",verticalAlign:"middle",position:"relative",fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,paddingRight:"10%",userSelect:"none"}),e(".day").css({display:"flex",flexDirection:"column",marginRight:"1px",marginBottom:"1px",background:"transparent",width:"100%"}),e(".hour").css({background:"#dddddd",marginBottom:"1px",width:"100%",height:"100%",userSelect:"none"}),e("<style type='text/css' scoped> .hover { background: "+n.hoverColor+" !important;} .selected { background: "+n.selectionColor+" !important; } .disabled { pointer-events: none !important; opacity: 0.3 !important; box-shadow: none !important; }</style>").appendTo(d),e(".schedule").on("contextmenu",function(){return!1}),e(".hour").on("click",function(){s?(i?e(this).removeClass("selected"):e(this).addClass("selected"),a(),s=!1,i=!1):(s=!0,r(e(this).parent()),e(this).hasClass("selected")?(d.trigger("selectionremoved"),e(this).removeClass("selected"),i=!0):(d.trigger("selectionmade"),e(this).addClass("selected"))),e(this).removeClass("hover")}).on("mouseenter",function(){s?i?e(this).removeClass("selected"):e(this).addClass("selected"):e(this).addClass("hover")}).on("mouseleave",function(){e(this).removeClass("hover")})}}}(jQuery);
